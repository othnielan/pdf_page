<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내파일 - 모바일 PDF 뷰어</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 상태바 */
        .status-bar {
            background-color: transparent;
            padding: 8px 20px;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            font-size: 12px;
            color: #666;
            gap: 10px;
        }

        .status-bar-dots {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background-color: #999;
        }

        .status-dot.square {
            border-radius: 0;
        }

        .status-dot.circle {
            border-radius: 50%;
        }

        .status-dot.triangle {
            width: 0;
            height: 0;
            background-color: transparent;
            border-left: 3px solid transparent;
            border-right: 3px solid transparent;
            border-top: 6px solid #999;
        }

        /* 헤더 */
        .header {
            background-color: transparent;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: none;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn {
            width: 24px;
            height: 24px;
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-btn svg {
            width: 20px;
            height: 20px;
            fill: #666;
        }

        .header-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-action {
            font-size: 14px;
            color: #ff5757;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }

        .header-action:disabled {
            color: #ccc;
            cursor: not-allowed;
        }

        .icon-btn {
            width: 24px;
            height: 24px;
            background: none;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-btn svg {
            width: 20px;
            height: 20px;
            fill: #666;
        }

        /* 메인 콘텐츠 */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* 파일 아이템 */
        .file-item {
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: relative;
        }

        .file-item:hover {
            background-color: #f8f8f8;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .file-item.selected {
            background-color: #fff5f5;
            border: 1px solid #ff5757;
        }

        .file-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s;
        }

        .file-checkbox.selected {
            background-color: #ff5757;
            border-color: #ff5757;
        }

        .file-checkbox.selected svg {
            width: 12px;
            height: 12px;
            fill: white;
        }

        .file-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            flex-shrink: 0;
            background-color: #fff3e0;
        }

        .file-icon svg {
            width: 24px;
            height: 24px;
            fill: #f57c00;
        }

        .file-info {
            flex: 1;
        }

        .file-title {
            font-size: 15px;
            font-weight: 500;
            color: #333;
            margin-bottom: 4px;
        }

        .file-meta {
            font-size: 12px;
            color: #999;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-count {
            color: #ff5757;
            font-weight: 500;
        }

        /* 플로팅 액션 버튼 */
        .fab {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 56px;
            height: 56px;
            background-color: #ff5757;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(255, 87, 87, 0.3);
            z-index: 100;
        }

        .fab svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        /* 하단 네비게이션 */
        .bottom-nav {
            background-color: white;
            padding: 8px 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -2px 4px rgba(0,0,0,0.1);
            border-radius: 16px 16px 0 0;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 3px;
            text-decoration: none;
            color: inherit;
        }

        .nav-item.active {
            color: #ff5757;
        }

        .nav-item svg {
            width: 18px;
            height: 18px;
            fill: #999;
            margin-bottom: 2px;
        }

        .nav-item.active svg {
            fill: #ff5757;
        }

        .nav-item span {
            font-size: 10px;
            color: #999;
        }

        .nav-item.active span {
            color: #ff5757;
        }

        /* 바텀시트 오버레이 */
        .bottom-sheet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .bottom-sheet-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* 바텀시트 */
        .bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            border-radius: 20px 20px 0 0;
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            max-height: 60vh;
            overflow-y: auto;
        }

        .bottom-sheet.show {
            transform: translateY(0);
        }

        .bottom-sheet-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
        }

        .bottom-sheet-handle {
            width: 40px;
            height: 4px;
            background-color: #ddd;
            border-radius: 2px;
            margin: 0 auto 15px;
        }

        .bottom-sheet-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .bottom-sheet-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 18px;
            color: #999;
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bottom-sheet-content {
            padding: 20px;
        }

        .upload-options {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-bottom: 30px;
        }

        .upload-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 20px 15px;
            border-radius: 12px;
            transition: background-color 0.2s;
            flex: 1;
        }

        .upload-option:hover {
            background-color: #f8f8f8;
        }

        .upload-option-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }

        .upload-option-icon.file {
            background-color: #ff6b6b;
        }

        .upload-option-icon.photo {
            background-color: #ff9999;
        }

        .upload-option-icon svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        .upload-option-label {
            font-size: 12px;
            color: #333;
            font-weight: 500;
        }

        .create-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .create-option {
            display: flex;
            align-items: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 15px;
            border-radius: 12px;
            transition: background-color 0.2s;
            text-align: left;
        }

        .create-option:hover {
            background-color: #f8f8f8;
        }

        .create-option-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .create-option-icon.folder {
            background-color: #ff6b6b;
        }

        .create-option-icon.pdf {
            background-color: #ff5757;
        }

        .create-option-icon svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .create-option-label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        /* 폴더 만들기 바텀시트 */
        .folder-bottom-sheet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .folder-bottom-sheet-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .folder-bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            border-radius: 20px 20px 0 0;
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            max-height: 60vh;
            overflow-y: auto;
        }

        .folder-bottom-sheet.show {
            transform: translateY(0);
        }

        .folder-bottom-sheet-header {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
            position: relative;
        }

        .folder-bottom-sheet-handle {
            width: 40px;
            height: 4px;
            background-color: #ddd;
            border-radius: 2px;
            margin: 0 auto 15px;
        }

        .folder-bottom-sheet-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .folder-bottom-sheet-close {
            position: absolute;
            top: 20px;
            left: 20px;
            background: none;
            border: none;
            font-size: 18px;
            color: #999;
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .folder-bottom-sheet-content {
            padding: 20px;
        }

        .folder-input-section {
            margin-bottom: 30px;
        }

        .folder-input-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            display: block;
        }

        .folder-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background-color: #f8f8f8;
            outline: none;
            transition: border-color 0.2s;
        }

        .folder-input:focus {
            border-color: #ff5757;
            background-color: white;
        }

        .folder-actions {
            display: flex;
            gap: 10px;
        }

        .folder-action-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .folder-action-btn.cancel {
            background-color: #f0f0f0;
            color: #666;
        }

        .folder-action-btn.cancel:hover {
            background-color: #e0e0e0;
        }

        .folder-action-btn.confirm {
            background-color: #ff5757;
            color: white;
        }

        .folder-action-btn.confirm:hover {
            background-color: #ff4444;
        }

        .folder-action-btn.confirm:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* 파일 액션 바텀시트 */
        .file-action-bottom-sheet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .file-action-bottom-sheet-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .file-action-bottom-sheet {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            border-radius: 20px 20px 0 0;
            z-index: 1001;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            max-height: 60vh;
            overflow-y: auto;
        }

        .file-action-bottom-sheet.show {
            transform: translateY(0);
        }

        .file-action-bottom-sheet-header {
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .file-action-bottom-sheet-handle {
            width: 40px;
            height: 4px;
            background-color: #ddd;
            border-radius: 2px;
            margin: 0 auto 0px;
        }

        .file-action-bottom-sheet-content {
            padding: 0 20px 20px;
        }

        .file-action-list {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .file-action-item {
            display: flex;
            align-items: center;
            background: none;
            border: none;
            cursor: pointer;
            padding: 15px 0;
            transition: background-color 0.2s;
            text-align: left;
            border-bottom: 1px solid #f0f0f0;
        }

        .file-action-item:last-child {
            border-bottom: none;
        }

        .file-action-item:hover {
            background-color: #f8f8f8;
        }

        .file-action-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .file-action-icon svg {
            width: 18px;
            height: 18px;
            fill: #666;
        }

        .file-action-label {
            font-size: 16px;
            color: #333;
            flex: 1;
        }

        /* 삭제 확인 팝업 */
        .delete-confirm-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .delete-confirm-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .delete-confirm-popup {
            background-color: white;
            border-radius: 16px;
            padding: 30px 20px 20px;
            margin: 20px;
            max-width: 320px;
            width: 100%;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        .delete-confirm-overlay.show .delete-confirm-popup {
            transform: scale(1);
        }

        .delete-confirm-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .delete-confirm-message {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
            margin-bottom: 30px;
        }

        .delete-confirm-actions {
            display: flex;
            gap: 10px;
        }

        .delete-confirm-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .delete-confirm-btn.cancel {
            background-color: #f0f0f0;
            color: #666;
        }

        .delete-confirm-btn.cancel:hover {
            background-color: #e0e0e0;
        }

        .delete-confirm-btn.delete {
            background-color: #ff5757;
            color: white;
        }

        .delete-confirm-btn.delete:hover {
            background-color: #ff4444;
        }
    </style>
</head>
<body>
    <!-- 상태바 -->
    <div class="status-bar">
        <div class="status-bar-dots">
            <div class="status-dot square"></div>
            <div class="status-dot circle"></div>
            <div class="status-dot triangle"></div>
        </div>
    </div>

    <!-- 헤더 -->
    <div class="header">
        <div class="header-left">
            <button class="back-btn" onclick="goBack()">
                <svg viewBox="0 0 24 24">
                    <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                </svg>
            </button>
            <div class="header-title">파일</div>
        </div>
        <div class="header-right">
            <button class="header-action" id="cancelBtn" onclick="cancelSelection()" style="display: none;">취소</button>
            <button class="icon-btn" onclick="toggleSelectionMode()">
                <svg viewBox="0 0 24 24">
                    <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
        <!-- 파일 1 -->
        <div class="file-item" data-file="file1" onclick="handleFileClick(this)">
            <div class="file-checkbox" style="display: none;">
                <svg viewBox="0 0 24 24" style="display: none;">
                    <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/>
                </svg>
            </div>
            <div class="file-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
            </div>
            <div class="file-info">
                <div class="file-title">과일정.pdf</div>
                <div class="file-meta">
                    <span>2025.04.07 15:01:01 · 1.59 MB</span>
                </div>
            </div>
        </div>

        <!-- 파일 2 -->
        <div class="file-item" data-file="file2" onclick="handleFileClick(this)">
            <div class="file-checkbox" style="display: none;">
                <svg viewBox="0 0 24 24" style="display: none;">
                    <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/>
                </svg>
            </div>
            <div class="file-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
            </div>
            <div class="file-info">
                <div class="file-title">과일정.pdf</div>
                <div class="file-meta">
                    <span>2025.04.07 15:01:01 · 1.59 MB</span>
                </div>
            </div>
        </div>

        <!-- 파일 3 -->
        <div class="file-item" data-file="file3" onclick="handleFileClick(this)">
            <div class="file-checkbox" style="display: none;">
                <svg viewBox="0 0 24 24" style="display: none;">
                    <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/>
                </svg>
            </div>
            <div class="file-icon">
                <svg viewBox="0 0 24 24">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                </svg>
            </div>
            <div class="file-info">
                <div class="file-title">과일정.pdf</div>
                <div class="file-meta">
                    <span>2025.04.07 15:01:01 · 1.59 MB</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 플로팅 액션 버튼 -->
    <button class="fab" onclick="addFile()">
        <svg viewBox="0 0 24 24">
            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
        </svg>
    </button>

    <!-- 하단 네비게이션 -->
    <div class="bottom-nav">
        <a href="mobile_design.html" class="nav-item">
            <svg viewBox="0 0 24 24">
                <path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
            </svg>
            <span>홈</span>
        </a>
        
        <a href="myfiles.html" class="nav-item active">
            <svg viewBox="0 0 24 24">
                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
            </svg>
            <span>파일</span>
        </a>
        
        <button class="nav-item">
            <svg viewBox="0 0 24 24">
                <path d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z"/>
            </svg>
            <span>도구</span>
        </button>
        
        <button class="nav-item">
            <svg viewBox="0 0 24 24">
                <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
            </svg>
            <span>설정</span>
        </button>
    </div>

    <!-- 바텀시트 오버레이 -->
    <div class="bottom-sheet-overlay" id="bottomSheetOverlay">
        <div class="bottom-sheet" id="bottomSheet">
            <div class="bottom-sheet-header">
                <div class="bottom-sheet-handle"></div>
                <h3 class="bottom-sheet-title">PDF 파일을 열어보세요.</h3>
                <button class="bottom-sheet-close" id="bottomSheetClose">×</button>
            </div>
            <div class="bottom-sheet-content">
                <!-- 파일 업로드 옵션 -->
                <div class="upload-options">
                    <button class="upload-option" data-option="file">
                        <div class="upload-option-icon file">
                            <svg viewBox="0 0 24 24">
                                <path d="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"/>
                            </svg>
                        </div>
                        <span class="upload-option-label">파일</span>
                    </button>
                    
                    <button class="upload-option" data-option="photo">
                        <div class="upload-option-icon photo">
                            <svg viewBox="0 0 24 24">
                                <path d="M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"/>
                            </svg>
                        </div>
                        <span class="upload-option-label">사진</span>
                    </button>
                </div>

                <!-- 폴더/파일 생성 옵션 -->
                <div class="create-options">
                    <button class="create-option" data-create="folder">
                        <div class="create-option-icon folder">
                            <svg viewBox="0 0 24 24">
                                <path d="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"/>
                            </svg>
                        </div>
                        <span class="create-option-label">폴더 만들기</span>
                    </button>
                    
                    <button class="create-option" data-create="pdf">
                        <div class="create-option-icon pdf">
                            <svg viewBox="0 0 24 24">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                        </div>
                        <span class="create-option-label">PDF 만들기</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 폴더 만들기 바텀시트 오버레이 -->
    <div class="folder-bottom-sheet-overlay" id="folderBottomSheetOverlay">
        <div class="folder-bottom-sheet" id="folderBottomSheet">
            <div class="folder-bottom-sheet-header">
                <button class="folder-bottom-sheet-close" id="folderBottomSheetClose">×</button>
                <div class="folder-bottom-sheet-handle"></div>
                <h3 class="folder-bottom-sheet-title">폴더 만들기</h3>
            </div>
            <div class="folder-bottom-sheet-content">
                <div class="folder-input-section">
                    <label class="folder-input-label">이름을 입력해 주세요</label>
                    <input type="text" class="folder-input" id="folderNameInput" placeholder="폴더명을 입력하세요">
                </div>
                <div class="folder-actions">
                    <button class="folder-action-btn cancel" id="folderCancelBtn">취소</button>
                    <button class="folder-action-btn confirm" id="folderConfirmBtn" disabled>확인</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 파일 액션 바텀시트 오버레이 -->
    <div class="file-action-bottom-sheet-overlay" id="fileActionBottomSheetOverlay">
        <div class="file-action-bottom-sheet" id="fileActionBottomSheet">
            <div class="file-action-bottom-sheet-header">
                <div class="file-action-bottom-sheet-handle"></div>
            </div>
            <div class="file-action-bottom-sheet-content">
                <div class="file-action-list">
                    <button class="file-action-item" data-action="open">
                        <div class="file-action-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"/>
                            </svg>
                        </div>
                        <span class="file-action-label">열기</span>
                    </button>
                    
                    <button class="file-action-item" data-action="share">
                        <div class="file-action-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z"/>
                            </svg>
                        </div>
                        <span class="file-action-label">공유</span>
                    </button>
                    
                    <button class="file-action-item" data-action="delete">
                        <div class="file-action-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                            </svg>
                        </div>
                        <span class="file-action-label">삭제</span>
                    </button>
                    
                    <button class="file-action-item" data-action="rename">
                        <div class="file-action-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/>
                            </svg>
                        </div>
                        <span class="file-action-label">이름변경</span>
                    </button>
                    
                    <button class="file-action-item" data-action="copy">
                        <div class="file-action-icon">
                            <svg viewBox="0 0 24 24">
                                <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>
                            </svg>
                        </div>
                        <span class="file-action-label">복제</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 삭제 확인 팝업 -->
    <div class="delete-confirm-overlay" id="deleteConfirmOverlay">
        <div class="delete-confirm-popup">
            <div class="delete-confirm-title">파일을 삭제할까요?</div>
            <div class="delete-confirm-message">삭제된 파일은 복구 할 수 없습니다.</div>
            <div class="delete-confirm-actions">
                <button class="delete-confirm-btn cancel" id="deleteConfirmCancel">취소</button>
                <button class="delete-confirm-btn delete" id="deleteConfirmDelete">삭제</button>
            </div>
        </div>
    </div>

    <script>
        // 바텀시트 관련 요소들
        const bottomSheetOverlay = document.getElementById('bottomSheetOverlay');
        const bottomSheet = document.getElementById('bottomSheet');
        const bottomSheetClose = document.getElementById('bottomSheetClose');

        // 폴더 만들기 바텀시트 관련 요소들
        const folderBottomSheetOverlay = document.getElementById('folderBottomSheetOverlay');
        const folderBottomSheet = document.getElementById('folderBottomSheet');
        const folderBottomSheetClose = document.getElementById('folderBottomSheetClose');
        const folderNameInput = document.getElementById('folderNameInput');
        const folderCancelBtn = document.getElementById('folderCancelBtn');
        const folderConfirmBtn = document.getElementById('folderConfirmBtn');

        // 파일 액션 바텀시트 관련 요소들
        const fileActionBottomSheetOverlay = document.getElementById('fileActionBottomSheetOverlay');
        const fileActionBottomSheet = document.getElementById('fileActionBottomSheet');

        // 삭제 확인 팝업 관련 요소들
        const deleteConfirmOverlay = document.getElementById('deleteConfirmOverlay');
        const deleteConfirmCancel = document.getElementById('deleteConfirmCancel');
        const deleteConfirmDelete = document.getElementById('deleteConfirmDelete');

        // 선택 모드 관련 변수
        let isSelectionMode = false;
        let selectedFiles = new Set();
        let pressTimer = null;

        // 바텀시트 열기 함수
        function openBottomSheet() {
            bottomSheetOverlay.classList.add('show');
            bottomSheet.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        // 바텀시트 닫기 함수
        function closeBottomSheet() {
            bottomSheetOverlay.classList.remove('show');
            bottomSheet.classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // 폴더 만들기 바텀시트 열기 함수
        function openFolderBottomSheet() {
            closeBottomSheet(); // 기존 바텀시트 닫기
            setTimeout(() => {
                folderBottomSheetOverlay.classList.add('show');
                folderBottomSheet.classList.add('show');
                document.body.style.overflow = 'hidden';
                folderNameInput.focus();
            }, 300);
        }

        // 폴더 만들기 바텀시트 닫기 함수
        function closeFolderBottomSheet() {
            folderBottomSheetOverlay.classList.remove('show');
            folderBottomSheet.classList.remove('show');
            document.body.style.overflow = 'auto';
            folderNameInput.value = '';
            folderConfirmBtn.disabled = true;
        }

        // 파일 액션 바텀시트 열기 함수
        function openFileActionBottomSheet() {
            fileActionBottomSheetOverlay.classList.add('show');
            fileActionBottomSheet.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        // 파일 액션 바텀시트 닫기 함수
        function closeFileActionBottomSheet() {
            fileActionBottomSheetOverlay.classList.remove('show');
            fileActionBottomSheet.classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // 삭제 확인 팝업 열기 함수
        function openDeleteConfirmPopup() {
            deleteConfirmOverlay.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        // 삭제 확인 팝업 닫기 함수
        function closeDeleteConfirmPopup() {
            deleteConfirmOverlay.classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // 선택 모드 토글
        function toggleSelectionMode() {
            isSelectionMode = !isSelectionMode;
            const cancelBtn = document.getElementById('cancelBtn');
            const checkboxes = document.querySelectorAll('.file-checkbox');
            
            if (isSelectionMode) {
                // 선택 모드 진입
                cancelBtn.style.display = 'block';
                checkboxes.forEach(checkbox => {
                    checkbox.style.display = 'flex';
                });
            } else {
                // 선택 모드 해제
                cancelBtn.style.display = 'none';
                checkboxes.forEach(checkbox => {
                    checkbox.style.display = 'none';
                });
                clearAllSelections();
            }
        }

        // 선택 해제
        function cancelSelection() {
            toggleSelectionMode();
        }

        // 모든 선택 해제
        function clearAllSelections() {
            selectedFiles.clear();
            document.querySelectorAll('.file-item').forEach(item => {
                item.classList.remove('selected');
                const checkbox = item.querySelector('.file-checkbox');
                const checkIcon = checkbox.querySelector('svg');
                checkbox.classList.remove('selected');
                checkIcon.style.display = 'none';
            });
            closeFileActionBottomSheet();
        }

        // 파일 클릭 처리
        function handleFileClick(fileElement) {
            if (!isSelectionMode) {
                // 일반 모드에서는 파일 열기
                const fileName = fileElement.querySelector('.file-title').textContent;
                openFile(fileName);
                return;
            }

            // 선택 모드에서는 파일 선택/해제
            toggleFileSelection(fileElement);
        }

        // 파일 선택/해제 토글
        function toggleFileSelection(fileElement) {
            const fileId = fileElement.getAttribute('data-file');
            const checkbox = fileElement.querySelector('.file-checkbox');
            const checkIcon = checkbox.querySelector('svg');

            if (selectedFiles.has(fileId)) {
                // 선택 해제
                selectedFiles.delete(fileId);
                fileElement.classList.remove('selected');
                checkbox.classList.remove('selected');
                checkIcon.style.display = 'none';
            } else {
                // 선택
                selectedFiles.add(fileId);
                fileElement.classList.add('selected');
                checkbox.classList.add('selected');
                checkIcon.style.display = 'block';
            }

            // 파일이 선택되었을 때 바텀시트 열기
            if (selectedFiles.size > 0) {
                setTimeout(() => {
                    openFileActionBottomSheet();
                }, 100);
            } else {
                closeFileActionBottomSheet();
            }
        }

        // 파일 아이템에 터치 이벤트 추가
        function addFileEventListeners() {
            document.querySelectorAll('.file-item').forEach(fileItem => {
                // 터치 시작
                fileItem.addEventListener('touchstart', function(e) {
                    if (!isSelectionMode) {
                        pressTimer = setTimeout(() => {
                            // 길게 누르면 선택 모드 활성화
                            if (!isSelectionMode) {
                                toggleSelectionMode();
                                toggleFileSelection(this);
                            }
                        }, 500); // 500ms 후 선택 모드 활성화
                    }
                });

                // 터치 종료
                fileItem.addEventListener('touchend', function(e) {
                    if (pressTimer) {
                        clearTimeout(pressTimer);
                        pressTimer = null;
                    }
                });

                // 터치 취소
                fileItem.addEventListener('touchcancel', function(e) {
                    if (pressTimer) {
                        clearTimeout(pressTimer);
                        pressTimer = null;
                    }
                });

                // 마우스 이벤트 (데스크톱)
                fileItem.addEventListener('mousedown', function(e) {
                    if (!isSelectionMode) {
                        pressTimer = setTimeout(() => {
                            if (!isSelectionMode) {
                                toggleSelectionMode();
                                toggleFileSelection(this);
                            }
                        }, 500);
                    }
                });

                fileItem.addEventListener('mouseup', function(e) {
                    if (pressTimer) {
                        clearTimeout(pressTimer);
                        pressTimer = null;
                    }
                });

                fileItem.addEventListener('mouseleave', function(e) {
                    if (pressTimer) {
                        clearTimeout(pressTimer);
                        pressTimer = null;
                    }
                });
            });
        }

        // 뒤로가기
        function goBack() {
            window.location.href = 'myfiles.html';
        }

        // 파일 열기
        function openFile(fileName) {
            // PDF 뷰어 페이지로 이동 (파일명을 파라미터로 전달)
            window.location.href = `pdf_viewer_mobile.html?file=${encodeURIComponent(fileName)}`;
        }

        // 파일 추가 (플로팅 액션 버튼)
        function addFile() {
            openBottomSheet();
        }

        // 입력 필드 이벤트 리스너
        folderNameInput.addEventListener('input', function() {
            const value = this.value.trim();
            folderConfirmBtn.disabled = value === '';
        });

        // 엔터 키로 폴더 생성
        folderNameInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !folderConfirmBtn.disabled) {
                createFolder();
            }
        });

        // 폴더 생성 함수
        function createFolder() {
            const folderName = folderNameInput.value.trim();
            if (folderName) {
                // 폴더 생성 로직 (실제 구현 시 서버 API 호출)
                console.log(`"${folderName}" 폴더가 생성되었습니다.`);
                closeFolderBottomSheet();
            }
        }

        // 바텀시트 닫기 이벤트들
        bottomSheetClose.addEventListener('click', closeBottomSheet);
        bottomSheetOverlay.addEventListener('click', function(e) {
            if (e.target === bottomSheetOverlay) {
                closeBottomSheet();
            }
        });

        // 폴더 만들기 바텀시트 닫기 이벤트들
        folderBottomSheetClose.addEventListener('click', closeFolderBottomSheet);
        folderCancelBtn.addEventListener('click', closeFolderBottomSheet);
        folderConfirmBtn.addEventListener('click', createFolder);
        folderBottomSheetOverlay.addEventListener('click', function(e) {
            if (e.target === folderBottomSheetOverlay) {
                closeFolderBottomSheet();
            }
        });

        // 파일 액션 바텀시트 닫기 이벤트들
        fileActionBottomSheetOverlay.addEventListener('click', function(e) {
            if (e.target === fileActionBottomSheetOverlay) {
                closeFileActionBottomSheet();
            }
        });

        // 삭제 확인 팝업 이벤트들
        deleteConfirmCancel.addEventListener('click', closeDeleteConfirmPopup);
        deleteConfirmDelete.addEventListener('click', function() {
            // 선택된 파일들 삭제
            const selectedCount = selectedFiles.size;
            
            // 선택된 파일들을 DOM에서 제거
            selectedFiles.forEach(fileId => {
                const fileElement = document.querySelector(`[data-file="${fileId}"]`);
                if (fileElement) {
                    fileElement.remove();
                }
            });
            
            // 상태 초기화
            selectedFiles.clear();
            closeDeleteConfirmPopup();
            closeFileActionBottomSheet();
            
            // 선택 모드 해제
            if (isSelectionMode) {
                cancelSelection();
            }
        });

        deleteConfirmOverlay.addEventListener('click', function(e) {
            if (e.target === deleteConfirmOverlay) {
                closeDeleteConfirmPopup();
            }
        });

        // ESC 키로 바텀시트 닫기
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (deleteConfirmOverlay.classList.contains('show')) {
                    closeDeleteConfirmPopup();
                } else if (folderBottomSheetOverlay.classList.contains('show')) {
                    closeFolderBottomSheet();
                } else if (bottomSheetOverlay.classList.contains('show')) {
                    closeBottomSheet();
                } else if (fileActionBottomSheetOverlay.classList.contains('show')) {
                    closeFileActionBottomSheet();
                } else if (isSelectionMode) {
                    cancelSelection();
                }
            }
        });

        // 업로드 옵션 클릭 이벤트
        document.querySelectorAll('.upload-option').forEach(item => {
            item.addEventListener('click', function() {
                const option = this.dataset.option;
                const label = this.querySelector('.upload-option-label').textContent;
                
                // 파일 선택 다이얼로그 열기
                const input = document.createElement('input');
                input.type = 'file';
                input.multiple = true;
                
                if (option === 'file') {
                    input.accept = '.pdf,.doc,.docx,.txt';
                } else if (option === 'photo') {
                    input.accept = 'image/*';
                }
                
                input.onchange = (e) => {
                    const files = e.target.files;
                    if (files.length > 0) {
                        console.log(`${files.length}개의 ${label} 파일이 선택되었습니다.`);
                        closeBottomSheet();
                    }
                };
                
                input.click();
            });
        });

        // 생성 옵션 클릭 이벤트
        document.querySelectorAll('.create-option').forEach(item => {
            item.addEventListener('click', function() {
                const createType = this.dataset.create;
                const label = this.querySelector('.create-option-label').textContent;
                
                if (createType === 'folder') {
                    openFolderBottomSheet();
                } else {
                    console.log(`${label} 기능이 선택되었습니다.`);
                    closeBottomSheet();
                }
            });
        });

        // 파일 액션 버튼 클릭 이벤트
        document.querySelectorAll('.file-action-item').forEach(item => {
            item.addEventListener('click', function() {
                const action = this.dataset.action;
                
                if (action === 'open') {
                    // 선택된 파일 정보 가져오기
                    const selectedFile = document.querySelector('.file-item.selected');
                    if (selectedFile) {
                        const fileName = selectedFile.querySelector('.file-title').textContent;
                        
                        // PDF 뷰어 페이지로 이동 (파일명을 파라미터로 전달)
                        window.location.href = `pdf_viewer_mobile.html?file=${encodeURIComponent(fileName)}`;
                    }
                    closeFileActionBottomSheet();
                } else if (action === 'delete') {
                    openDeleteConfirmPopup();
                } else if (action === 'share') {
                    console.log('공유 기능이 선택되었습니다.');
                    closeFileActionBottomSheet();
                } else if (action === 'rename') {
                    console.log('이름변경 기능이 선택되었습니다.');
                    closeFileActionBottomSheet();
                } else if (action === 'copy') {
                    console.log('복제 기능이 선택되었습니다.');
                    closeFileActionBottomSheet();
                }
            });
        });

        // 페이지 로드 시 파일 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', function() {
            addFileEventListeners();
        });

        // 페이지가 이미 로드된 경우를 위해 즉시 실행
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', addFileEventListeners);
        } else {
            addFileEventListeners();
        }
    </script>
</body>
</html>
